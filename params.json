{"note":"Don't delete this file! It's used internally to help with page regeneration.","name":"WePay API for Node","google":"","tagline":"A Node.js library for WePay payment processing.","body":"### About the Project\r\n\r\nWhile working on some WePay stuff for my employer in Scala, I was also having conversations with an old college buddy about potentially pursuing a side project that would involve payment processing. Since I've been a fan of doing node stuff on the side, and I was already familiar with [WePay](http://www.wepay.com)'s excellent API, I decided to just write a little node module to provide the functionality in a spectacularly simple way.\r\n\r\n### Getting It\r\n\r\nIf you're interested in using wepay-api in an application, you can get a copy of it from NPM. The current 0.1.0-snapshot is live on NPM and can be retrieved by running:\r\n\r\n```\r\nnpm install wepay-api\r\n```\r\n\r\n... or by adding the following dependency to your package.json:\r\n\r\n```javascript\r\n{ \"wepay-api\": \">= 0.1.0-snapshot\" }\r\n```\r\n\r\n### Using It\r\n\r\nThe wepay-api library is designed to be as straightforward as possible to use. Everything you need is in the WePay singleton that you require. So, by doing this somewhere toward the top of your module:\r\n\r\n```javascript\r\nvar WePay = require('wepay-api');\r\n```\r\n\r\n... you should get everything you need. After this point you'll need to init the WePay object so it knows how to talk to the server. That is done by calling the singleton's init method whose signature looks like this:\r\n\r\n```javascript\r\nWePay.init(\r\n  environment,\r\n  client_id, \r\n  client_secret,\r\n  oauth_redirect_uri);\r\n```\r\n\r\nThe parameters are pretty simple:\r\n\r\n* **environment** (string) should be either 'stage' or 'prod'.\r\n* **client_id** (int) The client ID provided to your app by WePay.\r\n* **client_secret** (string) The client secret provided to your app by WePay.\r\n* **oauth_redirect_uri** (string) The return url for OAuth calls. This is where WePay directs users to after they grant access to your application. The OAuth code you can use to get their access token will be passed in as a GET argument in the query string.\r\n\r\nIf that sounds like greek, you should take a look at the [WePay API docs](https://www.wepay.com/developer).\r\n\r\n#### Authorizing\r\n\r\nTo start an OAuth sequence call `WePay.authorizeUrl` and pass in the comma separated list of [permissions](https://www.wepay.com/developer/reference/permissions) you want to request. It will generate the URL you need to redirect your user to. When the user is directed back to your application, pass the code you got from WePay into the `WePay.retrieveToken` method with a callback to handle the token object that comes back.\r\n\r\nYou'll want to stuff the token object somewhere where you can get at it later. You're going to need it for pretty much every request you do on behalf of that user, after all.\r\n\r\nExample:\r\n\r\n```javascript\r\nvar url = WePay.authorize(\"collect_payments\");\r\n\r\n// Redirect that user to the URL. Then when their browser\r\n// kicks them back to you, you should run something like\r\nvar token_object = {};\r\nWePay.retrieveToken(codePassedInFromWePay, function(token) {\r\n  if (token.error) {\r\n    //Something went wrong.\r\n  } else {\r\n    token_object = token;\r\n  }\r\n});\r\n```\r\n\r\n#### Instances and Resources\r\n\r\nIn this library, we have the concept of an instance and a resource. A resource is the tunnel by which you can access objects on the WePay server. An instance is an actual object that represents something on the WePay server. With the exception of the App resource, every resource has a companion instance. So, the Checkout resource has a CheckoutInstance class that it returns for its instances. The Resources typically implement `.get`, `.find`, and `.create` methods to allow you to retrieve or create instances as you need to. When you want to persist changes in an instance back to WePay, you call `.save` on that instance.\r\n\r\n#### Making Resource Calls\r\n\r\nTo make an API call against a resource on WePay, access the singleton for that resource under the WePay singleton. As a very basic example, this is how you would retrieve an Account from the server:\r\n\r\n```javascript\r\nWePay.Account.get(account_id, token_object, function(account) {\r\n  // Do something.\r\n});\r\n```\r\n\r\nThis would get you an AccountInstance object. If you wanted to create a new account and then save it to the server, you would write:\r\n\r\n```javascript\r\nvar acct = WePay.Account.create(token_object, {\r\n  name: \"Test Account\",\r\n  description: \"Test description.\"\r\n});\r\n\r\nacct.save(function(saveResult) {\r\n  // Do something with the result like check for errors or\r\n  // save the account ID of the new account.\r\n});\r\n```\r\n\r\nDo note that the call to `save` is actually what persists the Account object it to the server. The create call only creates the object in memory. The function names that I use in this project are intended to (more or less) directly mimmic those on the WePay server.\r\n\r\n### About Me\r\n\r\nMy name is Matt Farmer, also known as [@farmdawgnation](http://twitter.com/farmdawgnation). I'm a Software Engineer at [OpenStudy](http://openstudy.com), where we build clever ways of disrupting the status quo in Educational Technology, fly remote controlled helicopters (that can shoot each other down!), and occasionally debate whether or not a hot dog is a sandwich. Occasionally, I [blog about stuff](http://farmdawgnation.com)."}